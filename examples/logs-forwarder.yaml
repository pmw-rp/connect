input:
  broker_pod_log:
    namespace: ${NAMESPACE}
    pod: ${POD_PREFIX}-${ORDINAL}
    container: redpanda
    labels:
      image: $.spec.containers[0].image
      node: $.spec.nodeName
      pod_id: $.metadata.uid
      host: $.spec.hostname
      pod: $.metadata.name
      namespace: $.metadata.namespace
      container: $.spec.containers[0].name

output:
  loki:
    labels:
      - redpanda.*
      - pod_id
    conf:
      name: ${LOKI_INSTANCE_NAME}
      url: ${LOKI_URL}
      client:
        basic_auth:
          username: ${LOKI_USERNAME}
          password: ${LOKI_PASSWORD}